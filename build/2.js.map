{"version":3,"sources":["webpack:///2.js","webpack:///webpack/bootstrap e9e5c3761f755b49cde8?6a17***","webpack:///./src/audio.js?be39***","webpack:///./src/constant/index.js?1d1f***","webpack:///./src/util/noise.js?3433***","webpack:///./src/page/2.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","p","s","_classCallCheck","instance","Constructor","TypeError","drawFrequencyData","ctx","width","height","analyser","expand","loop","requestAnimationFrame","getByteFrequencyData","data","globalAlpha","clearRect","fillStyle","barCount","step","fillRect","barWidth","barGap","frequencyBinCount","Uint8Array","drawTimeDomainData","getByteTimeDomainData","lineWidth","strokeStyle","beginPath","sliceWidth","fftSize","x","v","y","moveTo","lineTo","stroke","__WEBPACK_IMPORTED_MODULE_0__util_noise__","__WEBPACK_IMPORTED_MODULE_1__constant__","_extends","Object","assign","target","arguments","length","source","key","prototype","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","AudioContext","window","webkitAudioContext","getUserMedia","navigator","webkitGetUserMedia","bind","Audio","opts","undefined","this","defaultOpts","mode","options","context","createBufferSource","gainNode","createGain","createAnalyser","oscillator","createOscillator","minDecibels","maxDecibels","smoothingTimeConstant","connect","destination","url","_this","fetch","then","res","arrayBuffer","buffer","Promise","resolve","reject","decodeAudioData","_this2","disconnect","audio","steam","createMediaStreamSource","type","sampleRate","buffSize","noiseBuff","createBuffer","noiseData","getChannelData","forEach","_this3","nodeLength","frequency","bpm","toneLength","concat","isPlaying","startTime","endTime","currentTime","split","item","j","blank","trim","start","stop","duraton","volume","offset","when","gain","play","dataArray","frequencyData","timeDomainData","_ref","_ref$mode","_ref$expand","_ref$target","_ref$width","_ref$height","canvas","document","createElement","getContext","body","appendChild","get","NOTES","NOTE_LENGTH","C0","C#0","Db0","D0","D#0","Eb0","E0","F0","F#0","Gb0","G0","G#0","Ab0","A0","A#0","Bb0","B0","C1","C#1","Db1","D1","D#1","Eb1","E1","F1","F#1","Gb1","G1","G#1","Ab1","A1","A#1","Bb1","B1","C2","C#2","Db2","D2","D#2","Eb2","E2","F2","F#2","Gb2","G2","G#2","Ab2","A2","A#2","Bb2","B2","C3","C#3","Db3","D3","D#3","Eb3","E3","F3","F#3","Gb3","G3","G#3","Ab3","A3","A#3","Bb3","B3","C4","C#4","Db4","D4","D#4","Eb4","E4","F4","F#4","Gb4","G4","G#4","Ab4","A4","A#4","Bb4","B4","C5","C#5","Db5","D5","D#5","Eb5","E5","F5","F#5","Gb5","G5","G#5","Ab5","A5","A#5","Bb5","B5","C6","C#6","Db6","D6","D#6","Eb6","E6","F6","F#6","Gb6","G6","G#6","Ab6","A6","A#6","Bb6","B6","C7","C#7","Db7","D7","D#7","Eb7","E7","F7","F#7","Gb7","G7","G#7","Ab7","A7","A#7","Bb7","B7","C8","whole","half","quarter","eighth","sixteenth","white","pink","brown","perlin","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","random","Math","size","Float32Array","map","_fill","fill","_fill2","a","b","d","e","f","g","basic","cache","__WEBPACK_IMPORTED_MODULE_0__audio__","button","querySelector","load","innerHTML","addEventListener","toggle"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAI,EAAAJ,SACAK,GAAA,EACAH,WAUA,OANAJ,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,GAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBAwCA,OAZAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAK,EAAA,SAAAK,OAA2C,MAAAA,QAG3CV,oBAAAW,EAAA,UAGAX,wCAAAY,EAAA,KDMM,SAASR,OAAQD,QAASH,qBAE/B,YAOA,SAASa,iBAAgBC,SAAUC,aAAe,KAAMD,mBAAoBC,cAAgB,KAAM,IAAIC,WAAU,qCE8KjH,QAASC,mBAAkBC,IAAKC,MAAOC,OAAQC,SAAUC,QAQvD,QAASC,QACPC,sBAAsBD,MAEtBF,SAASI,qBAAqBC,MAE9BR,IAAIS,YAAc,EAClBT,IAAIU,UAAU,EAAG,EAAGT,MAAOC,QAE3BF,IAAIW,UAAY,eAEhB,KAAK,GAAIxB,GAAI,EAAGA,EAAIyB,SAAUzB,IAAK,CACjC,GAAMK,OAAQgB,KAAKrB,EAAI0B,MAAQ,IAAMX,MAErCF,KAAIS,YAAc,GAAMjB,MAAQU,OAAS,GACzCF,IAAIc,SAAS3B,GAAK4B,SAAWC,QAASd,OAASV,MAAOuB,SAAUvB,QArBpE,GAAMyB,mBAAoBd,SAASc,kBAC7BT,KAAO,GAAIU,YAAWD,mBACtBF,SAAWd,MAAQgB,mBAAqBb,OAAS,IAAM,GACvDY,OAAS,EACTJ,SAAYX,OAASc,SAAWC,QAChCH,KAAQI,kBAAoBL,SAAY,CAoB9CP,QAGF,QAASc,oBAAmBnB,IAAKC,MAAOC,OAAQC,SAAUC,QAIxD,QAASC,QACPC,sBAAsBD,MAEtBF,SAASiB,sBAAsBZ,MAE/BR,IAAIS,YAAc,EAClBT,IAAIU,UAAU,EAAG,EAAGT,MAAOC,QAE3BF,IAAIqB,UAAY,EAChBrB,IAAIsB,YAAc,gBAElBtB,IAAIuB,WAKJ,KAAK,GAHCC,YAAavB,MAAQwB,QACvBC,EAAI,EAECvC,EAAI,EAAGA,EAAIsC,QAAStC,IAAK,CAChC,GAAMwC,GAAInB,KAAKrB,GAAK,IACdyC,EAAID,EAAIzB,OAAS,CAEb,KAANf,EACFa,IAAI6B,OAAOH,EAAGE,GAEd5B,IAAI8B,OAAOJ,EAAGE,GAGhBF,GAAKF,WAGPxB,IAAI8B,OAAO7B,MAAOC,OAAS,GAC3BF,IAAI+B,SAjCN,GAAMN,SAAUtB,SAASsB,QACnBjB,KAAO,GAAIU,YAAWO,QAmC5BpB,QFtPoB,GAAI2B,2CAA4ClD,oBAAoB,GAChEmD,wCAA0CnD,oBAAoB,GACnFoD,SAAWC,OAAOC,QAAU,SAAUC,QAAU,IAAK,GAAIlD,GAAI,EAAGA,EAAImD,UAAUC,OAAQpD,IAAK,CAAE,GAAIqD,QAASF,UAAUnD,EAAI,KAAK,GAAIsD,OAAOD,QAAcL,OAAOO,UAAUC,eAAetD,KAAKmD,OAAQC,OAAQJ,OAAOI,KAAOD,OAAOC,MAAY,MAAOJ,SAEnPO,aAAe,WAAc,QAASC,kBAAiBR,OAAQS,OAAS,IAAK,GAAI3D,GAAI,EAAGA,EAAI2D,MAAMP,OAAQpD,IAAK,CAAE,GAAI4D,YAAaD,MAAM3D,EAAI4D,YAAWC,WAAaD,WAAWC,aAAc,EAAOD,WAAWE,cAAe,EAAU,SAAWF,cAAYA,WAAWG,UAAW,GAAMf,OAAOgB,eAAed,OAAQU,WAAWN,IAAKM,aAAiB,MAAO,UAAUlD,YAAauD,WAAYC,aAAiJ,MAA9HD,aAAYP,iBAAiBhD,YAAY6C,UAAWU,YAAiBC,aAAaR,iBAAiBhD,YAAawD,aAAqBxD,gBE9C3hByD,aAAeC,OAAOD,cAAgBC,OAAOC,mBAC7CC,cAAgBC,UAAUD,cAAgBC,UAAUC,oBAAoBC,KAAKF,WAE7EG,MFsDO,WEpDX,QAAAA,SAAuB,GAAXC,MAAWxB,UAAAC,QAAA,GAAAwB,SAAAzB,UAAA,MAAAA,UAAA,EAAA3C,iBAAAqE,KAAAH,MACrB,IAAMI,cACJxC,QAAS,IAGXuC,MAAKE,KAAO,SAEZF,KAAKG,QAALjC,YAAmB+B,YAAgBH,MAEnCE,KAAKI,QAAU,GAAId,cAEnBU,KAAKxB,OAASwB,KAAKI,QAAQC,qBAC3BL,KAAKM,SAAWN,KAAKI,QAAQG,aAC7BP,KAAK7D,SAAW6D,KAAKI,QAAQI,iBAC7BR,KAAKS,WAAaT,KAAKI,QAAQM,mBAK/BV,KAAK7D,SAASwE,gBACdX,KAAK7D,SAASyE,gBACdZ,KAAK7D,SAAS0E,sBAAwB,IAEtCb,KAAKxB,OAAOsC,QAAQd,KAAK7D,UACzB6D,KAAK7D,SAAS2E,QAAQd,KAAKM,UAC3BN,KAAKM,SAASQ,QAAQd,KAAKI,QAAQW,aF6QpC,MAjNAnC,cAAaiB,QACXpB,IAAK,OACLjD,MAAO,SE3DLwF,KAAK,GAAAC,OAAAjB,IACR,OAAOkB,OAAMF,KACVG,KAAK,SAAAC,KAAA,MAAOA,KAAIC,gBAChBF,KAAK,SAAAG,QACJ,MAAO,IAAIC,SAAQ,SAACC,QAASC,QAC3BR,MAAKb,QAAQsB,gBAAgBJ,OAAQE,QAASC,YAGjDN,KAAK,SAAA3E,MAEJ,MADAyE,OAAKK,OAAS9E,KACPA,UFgEViC,IAAK,QACLjD,MAAO,WE7DF,GAAAmG,QAAA3B,IAKN,OAJAA,MAAKE,KAAO,QACZF,KAAKM,SAAS9E,MAAQ,EACtBwE,KAAK7D,SAASyF,aAEP,GAAIL,SAAQ,SAASC,QAASC,QACnChC,cAAcoC,OAAO,GAAOL,QAASC,UAEtCN,KAAK,SAAAW,OAEJH,OAAKnD,OAASmD,OAAKvB,QAAQ2B,wBAAwBD,OACnDH,OAAKnD,OAAOsC,QAAQa,OAAKxF,eFkE1BsC,IAAK,QACLjD,MAAO,WE/DY,GAAhBwG,MAAgB1D,UAAAC,QAAA,GAAAwB,SAAAzB,UAAA,GAAT,QAASA,UAAA,EAGpB0B,MAAKE,KAAO,OAEZ,IAAM+B,YAAajC,KAAKI,QAAQ6B,WAC1BC,SAAW,EAAID,WACfE,UAAYnC,KAAKI,QAAQgC,aAAa,EAAGF,SAAUD,YACnDI,UAAYF,UAAUG,eAAe,GACrC9F,KAAOwB,0CAAOgE,MAAME,SAQ1B,OANAG,WAAUE,QAAQ,SAAC5E,EAAGxC,GACpBkH,UAAUlH,GAAKqB,KAAKrB,KAGtB6E,KAAKsB,OAASa,UAEPZ,QAAQC,QAAQW,cFoEtB1D,IAAK,OACLjD,MAAO,WElEM,GAAAgH,QAAAxC,KAAXF,KAAWxB,UAAAC,QAAA,GAAAwB,SAAAzB,UAAA,MAAAA,UAAA,GACR2B,aACJwC,WAAY,UACZC,UAAW,IACXV,KAAM,OACNW,IAAK,KAEDxC,QAAAjC,YAAc+B,YAAgBH,KAEpCE,MAAK4C,WAAa,GAAKzC,QAAQwC,IAAM,IAAM1E,wCAAA,EAAYkC,QAAQsC,YAE/DtC,QAAQuC,aAAeG,OAAO1C,QAAQuC,WAEtC1C,KAAK8C,WAAY,EACjB9C,KAAKM,SAAS9E,MAAQ,EAEtB,IAAIuH,WAAA,OAAWC,QAAA,MAEf7C,SAAQuC,UAAUH,QAAQ,SAAC5E,EAAGxC,GAC5B4H,UAAYC,QAAUA,QAAUR,OAAKI,WAAa,EAAIJ,OAAKpC,QAAQ6C,YAAc9H,EAAIqH,OAAKI,WAC1FI,QAAUD,UAAYA,UAAYP,OAAKI,WAAaJ,OAAKpC,QAAQ6C,aAAe9H,EAAI,GAAKqH,OAAKI,WAE9FjF,EAAEuF,MAAM,KAAKX,QAAQ,SAACY,KAAMC,GAC1B,GAAInF,wCAAA,EAAYkF,MAAO,CACrB,GAAME,OAAQ,GAAKlD,QAAQwC,IAAM,IAAM1E,wCAAA,EAAYkF,KAGnD,OAFAJ,YAAaM,WACbL,QAAUD,UAAYM,OAIxB,GAAM5C,YAAa+B,OAAKpC,QAAQM,kBAEhCD,YAAWuB,KAAO7B,QAAQ6B,KAC1BvB,WAAWiC,UAAUlH,MAAQyC,wCAAA,EAAMkF,KAAKG,SAAWH,KACnD1C,WAAWK,QAAQ0B,OAAKrG,UACxBsE,WAAW8C,MAAMR,WACjBtC,WAAW+C,KAAMR,SAEjBR,OAAK/B,WAAaA,eAItBT,KAAKE,KAAO,UF0EXzB,IAAK,OACLjD,MAAO,WExEM,GAAXsE,MAAWxB,UAAAC,QAAA,GAAAwB,SAAAzB,UAAA,MAAAA,UAAA,EAId,IAHA0B,KAAK8C,WAAY,EACjB9C,KAAKM,SAAS9E,MAAQ,EAEJ,SAAdwE,KAAKE,KACP,MAAOF,MAAKS,WAAW8C,MAAMvD,KAAKI,QAAQ6C,YAG5C,IAAMhD,cACJ5D,MAAM,EACNoH,QAAS,EACTC,OAAQ,EACRC,OAAQ,EACRC,KAAM,GAGFzD,QAAAjC,YAAc+B,YAAgBH,MAGlC4D,OAIEvD,QAJFuD,OACAC,OAGExD,QAHFwD,OACAtH,KAEE8D,QAFF9D,KACAuH,KACEzD,QADFyD,IAGF5D,MAAKxB,OAAO8C,OAAStB,KAAKsB,OAC1BtB,KAAKxB,OAAOnC,KAAOA,KACnB2D,KAAKM,SAASuD,KAAKrI,MAAQkI,OAE3B1D,KAAKxB,OAAO+E,MAAMK,KAAMD,WF4EvBlF,IAAK,OACLjD,MAAO,WEtER,MAHAwE,MAAK8C,WAAY,EACjB9C,KAAKM,SAAS9E,MAAQ,EAEJ,SAAdwE,KAAKE,KACAF,KAAKS,WAAW+C,KAAKxD,KAAKI,QAAQ6C,YAAcjD,KAAK4C,gBAG9D5C,MAAKxB,OAAOgF,KAAK,MF6EhB/E,IAAK,SACLjD,MAAO,WE1ERwE,KAAK8C,UAAY9C,KAAKwD,OAASxD,KAAK8D,UF8EnCrF,IAAK,mBACLjD,MAAO,WE3ER,GAAMuI,WAAY,GAAI7G,YAAW8C,KAAK7D,SAASc,kBAI/C,OAFA+C,MAAK7D,SAASI,qBAAqBwH,WACnC/D,KAAKgE,cAAgBD,UACdA,aF+ENtF,IAAK,oBACLjD,MAAO,WE5ER,GAAMuI,WAAY,GAAI7G,YAAW8C,KAAK7D,SAASsB,QAI/C,OAFAuC,MAAK7D,SAASiB,sBAAsB2G,WACpC/D,KAAKiE,eAAiBF,UACfA,aFgFNtF,IAAK,SACLjD,MAAO,SAAgB0I,MExEvB,GAAAC,WAAAD,KALDhE,UAKCH,SAAAoE,UALM,OAKNA,UAAAC,YAAAF,KAJD9H,cAIC2D,SAAAqE,yBAAAC,YAAAH,KAHD7F,cAGC0B,SAAAsE,YAHQ,KAGRA,YAAAC,WAAAJ,KAFDjI,YAEC8D,SAAAuE,WAFO,IAEPA,WAAAC,YAAAL,KADDhI,cACC6D,SAAAwE,YADQ,IACRA,YACKC,OAASnG,OAASA,OAASoG,SAASC,cAAc,UAClD1I,IAAMwI,OAAOG,WAAW,KAE9BH,QAAOvI,MAAQA,MACfuI,OAAOtI,OAASA,OAChBuI,SAASG,KAAKC,YAAYL,QAEb,SAATtE,OACFF,KAAK7D,SAASsB,QAAU,IACxB1B,kBAAkBC,IAAKC,MAAOC,OAAQ8D,KAAK7D,SAAUC,SAG1C,SAAT8D,OACFF,KAAK7D,SAASsB,QAAU,KACxBN,mBAAmBnB,IAAKC,MAAOC,OAAQ8D,KAAK7D,SAAUC,aFwFlDyD,QEnFV5E,SAAA,EAAe4E,OFmKT,SAAS3E,OAAQD,QAASH,qBAE/B,YAEqBqD,QAAOgB,eAAelE,QAAS,KAAMgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOC,UACrG5G,OAAOgB,eAAelE,QAAS,KAAMgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOE,eGtYpH,IAAMD,QACXE,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,KACNC,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,KACNC,MAAO,MACPC,IAAO,MACPC,GAAM,KACNC,MAAO,MACPC,IAAO,MACPC,GAAM,MACNC,GAAM,KACNC,MAAO,MACPC,IAAO,MACPC,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,KACNC,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,GACNC,MAAO,MACPC,IAAO,MACPC,GAAM,GACNC,MAAO,MACPC,IAAO,MACPC,GAAM,MACNC,GAAM,MACNC,MAAO,KACPC,IAAO,KACPC,GAAM,MACNC,MAAO,MACPC,IAAO,MACPC,GAAM,MACNC,GAAM,MACNC,MAAO,KACPC,IAAO,KACPC,GAAM,GACNC,MAAO,OACPC,IAAO,OACPC,GAAM,IACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,IACPC,IAAO,IACPC,GAAM,IACNC,MAAO,OACPC,IAAO,OACPC,GAAM,IACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,IACNC,MAAO,MACPC,IAAO,MACPC,GAAM,IACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,MAAO,OACPC,IAAO,OACPC,GAAM,IACNC,MAAO,OACPC,IAAO,OACPC,GAAM,OACNC,GAAM,OACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,KACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,GAAM,KACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,MAAO,QACPC,IAAO,QACPC,GAAM,KACNC,MAAO,QACPC,IAAO,QACPC,GAAM,QACNC,GAAM,SAGKzI,aACX0I,MAAS,EACTC,KAAQ,EACRC,QAAW,EACXC,OAAU,GACVC,UAAa,MH6YT,SAAS5S,OAAQD,QAASH,qBAE/B,YAEqBqD,QAAOgB,eAAelE,QAAS,SAAUgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOiJ,UACzG5P,OAAOgB,eAAelE,QAAS,QAASgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOkJ,SACxG7P,OAAOgB,eAAelE,QAAS,SAAUgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOmJ,UACzG9P,OAAOgB,eAAelE,QAAS,UAAWgE,cAAc,EAAOD,YAAY,EAAM8F,IAAK,WAAa,MAAOoJ,UAAY,IAAIC,gBAAiB,WAAc,QAASC,eAAcC,IAAKlT,GAAK,GAAImT,SAAeC,IAAK,EAAUC,IAAK,EAAWC,GAAK1O,MAAW,KAAM,IAAK,GAAiC2O,IAA7BC,GAAKN,IAAIO,OAAOC,cAAmBN,IAAMG,GAAKC,GAAGG,QAAQC,QAAoBT,KAAKU,KAAKN,GAAGlT,QAAYL,GAAKmT,KAAK/P,SAAWpD,GAA3DoT,IAAK,IAAoE,MAAOU,KAAOT,IAAK,EAAMC,GAAKQ,IAAO,QAAU,KAAWV,IAAMI,GAAG,WAAWA,GAAG,YAAe,QAAU,GAAIH,GAAI,KAAMC,KAAQ,MAAOH,MAAQ,MAAO,UAAUD,IAAKlT,GAAK,GAAI+T,MAAMC,QAAQd,KAAQ,MAAOA,IAAY,IAAIO,OAAOC,WAAY1Q,QAAOkQ,KAAQ,MAAOD,eAAcC,IAAKlT,EAAa,MAAM,IAAIW,WAAU,4DItiB5tBsT,OAAS,iBAAsB,GAAhBC,KAAKD,SAAe,GAI5BrB,MAAQ,SAAAuB,MACnB,GAAM9S,MAAO,GAAI+S,cAAaD,MAC3BE,IAAI,iBAAMJ,WAEb,OAAO5S,OAGIwR,KAAO,SAAAsB,MAClB,GAAM9S,MAAO,GAAI+S,cAAaD,MADJG,MAGE,GAAIP,OAAM,GAAGQ,KAAK,GAHpBC,OAAAxB,eAAAsB,MAAA,GAGrBG,EAHqBD,OAAA,GAGlBE,EAHkBF,OAAA,GAGfpU,EAHeoU,OAAA,GAGZG,EAHYH,OAAA,GAGTI,EAHSJ,OAAA,GAGNK,EAHML,OAAA,GAGHM,EAHGN,OAAA,EAK1B,OAAOnT,MAAKgT,IAAI,SAAC7R,EAAGxC,GAClB,GAAM+U,OAAQd,QAad,OAXIjU,KACF8U,EAAY,QAARC,OAGNN,EAAI,OAAUA,EAAY,SAARM,MAClBL,EAAI,OAAUA,EAAY,SAARK,MAClB3U,EAAI,KAAUA,EAAY,QAAR2U,MAClBJ,EAAI,MAAUA,EAAY,SAARI,MAClBH,EAAI,IAAUA,EAAY,SAARG,MAClBD,SAAcA,EAAY,QAARC,MAEXN,EAAIC,EAAItU,EAAIuU,EAAIC,EAAIC,EAAIC,EAAY,MAARC,SAI1BjC,MAAQ,SAAAqB,MACnB,GAAM9S,MAAO,GAAI+S,cAAaD,MAE1Ba,MAAQ,CAEZ,OAAO3T,MAAKgT,IAAI,SAAC7R,EAAGxC,GAClB,GAAM+U,OAAQd,QAEd,OAAOe,QAASA,MAAS,IAAOD,OAAU,QAKjChC,OAAS,SAAAoB,SJyjBf,CAED,SAASpU,OAAQD,QAASH,qBAE/B,YACqB,IAAIsV,sCAAuCtV,oBAAoB,GK3mB/E+G,MAAQ,GAAIuO,sCAAA,EAEZC,OAAS5L,SAAS6L,cAAc,SAEtCzO,OAAM0O,KAAK,gCACRpP,KAAK,WACJkP,OAAOG,UAAY,OAEnBH,OAAOI,iBAAiB,QAAS,iBAAM5O,OAAM6O","file":"2.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmory imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_noise__ = __webpack_require__(2);\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constant__ = __webpack_require__(1);\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t\n\t\n\t\n\t\n\tvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\tvar getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia).bind(navigator);\n\t\n\tvar Audio = function () {\n\t  function Audio() {\n\t    var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    _classCallCheck(this, Audio);\n\t\n\t    var defaultOpts = {\n\t      fftSize: 256 // 32 ~ 32768\n\t    };\n\t\n\t    this.mode = 'normal'; // [normal, voice, tone, noise]\n\t\n\t    this.options = _extends({}, defaultOpts, opts);\n\t\n\t    this.context = new AudioContext();\n\t\n\t    this.source = this.context.createBufferSource();\n\t    this.gainNode = this.context.createGain();\n\t    this.analyser = this.context.createAnalyser();\n\t    this.oscillator = this.context.createOscillator();\n\t\n\t    // 暂时在 render 中根据类型调整 fftSize\n\t    // todo 同一个audio 实例中，ffisize 不共享，使支持一个实例多个 render\n\t    // this.analyser.fftSize = this.options.fftSize\n\t    this.analyser.minDecibels = -90;\n\t    this.analyser.maxDecibels = -10;\n\t    this.analyser.smoothingTimeConstant = 0.85;\n\t\n\t    this.source.connect(this.analyser);\n\t    this.analyser.connect(this.gainNode);\n\t    this.gainNode.connect(this.context.destination);\n\t  }\n\t\n\t  _createClass(Audio, [{\n\t    key: 'load',\n\t    value: function load(url) {\n\t      var _this = this;\n\t\n\t      return fetch(url).then(function (res) {\n\t        return res.arrayBuffer();\n\t      }).then(function (buffer) {\n\t        return new Promise(function (resolve, reject) {\n\t          _this.context.decodeAudioData(buffer, resolve, reject);\n\t        });\n\t      }).then(function (data) {\n\t        _this.buffer = data;\n\t        return data;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'voice',\n\t    value: function voice() {\n\t      var _this2 = this;\n\t\n\t      this.mode = 'voice';\n\t      this.gainNode.value = 0;\n\t      this.analyser.disconnect();\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        getUserMedia({ audio: true }, resolve, reject);\n\t      }).then(function (steam) {\n\t        // 流式音频，需要修改 source\n\t        _this2.source = _this2.context.createMediaStreamSource(steam);\n\t        _this2.source.connect(_this2.analyser);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'noise',\n\t    value: function noise() {\n\t      var type = arguments.length <= 0 || arguments[0] === undefined ? 'brown' : arguments[0];\n\t\n\t      // type: [white, pink, brown, perlin]\n\t\n\t      this.mode = 'noise';\n\t\n\t      var sampleRate = this.context.sampleRate;\n\t      var buffSize = 2 * sampleRate;\n\t      var noiseBuff = this.context.createBuffer(1, buffSize, sampleRate);\n\t      var noiseData = noiseBuff.getChannelData(0); //  Float32Array\n\t      var data = __WEBPACK_IMPORTED_MODULE_0__util_noise__[type](buffSize);\n\t\n\t      noiseData.forEach(function (v, i) {\n\t        noiseData[i] = data[i];\n\t      });\n\t\n\t      this.buffer = noiseBuff;\n\t\n\t      return Promise.resolve(noiseBuff);\n\t    }\n\t  }, {\n\t    key: 'tone',\n\t    value: function tone() {\n\t      var _this3 = this;\n\t\n\t      var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      var defaultOpts = {\n\t        nodeLength: 'quarter',\n\t        frequency: 2000,\n\t        type: 'sine',\n\t        bpm: 120\n\t      };\n\t      var options = _extends({}, defaultOpts, opts);\n\t\n\t      this.toneLength = 1 / (options.bpm / 60) * __WEBPACK_IMPORTED_MODULE_1__constant__[\"a\" /* NOTE_LENGTH */][options.nodeLength];\n\t\n\t      options.frequency = [].concat(options.frequency);\n\t\n\t      this.isPlaying = true;\n\t      this.gainNode.value = 0.5;\n\t\n\t      var startTime = void 0,\n\t          endTime = void 0;\n\t\n\t      options.frequency.forEach(function (v, i) {\n\t        startTime = endTime ? endTime + _this3.toneLength / 2 : _this3.context.currentTime + i * _this3.toneLength;\n\t        endTime = startTime ? startTime + _this3.toneLength : _this3.context.currentTime + (i + 1) * _this3.toneLength;\n\t\n\t        v.split(',').forEach(function (item, j) {\n\t          if (__WEBPACK_IMPORTED_MODULE_1__constant__[\"a\" /* NOTE_LENGTH */][item]) {\n\t            var blank = 1 / (options.bpm / 60) * __WEBPACK_IMPORTED_MODULE_1__constant__[\"a\" /* NOTE_LENGTH */][item];\n\t            startTime += blank;\n\t            endTime = startTime + blank;\n\t            return;\n\t          }\n\t\n\t          var oscillator = _this3.context.createOscillator();\n\t\n\t          oscillator.type = options.type; // [sine, square, sawtooth, triangle, custom]\n\t          oscillator.frequency.value = __WEBPACK_IMPORTED_MODULE_1__constant__[\"b\" /* NOTES */][item.trim()] || item;\n\t          oscillator.connect(_this3.analyser);\n\t          oscillator.start(startTime);\n\t          oscillator.stop(endTime);\n\t\n\t          _this3.oscillator = oscillator;\n\t        });\n\t      });\n\t\n\t      this.mode = 'tone';\n\t    }\n\t  }, {\n\t    key: 'play',\n\t    value: function play() {\n\t      var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      this.isPlaying = true;\n\t      this.gainNode.value = 1;\n\t\n\t      if (this.mode === 'tone') {\n\t        return this.oscillator.start(this.context.currentTime);\n\t      }\n\t\n\t      var defaultOpts = {\n\t        loop: false,\n\t        duraton: 0,\n\t        volume: 1,\n\t        offset: 0,\n\t        when: 0\n\t      };\n\t\n\t      var options = _extends({}, defaultOpts, opts);\n\t\n\t      var volume = options.volume;\n\t      var offset = options.offset;\n\t      var loop = options.loop;\n\t      var when = options.when;\n\t\n\t\n\t      this.source.buffer = this.buffer;\n\t      this.source.loop = loop;\n\t      this.gainNode.gain.value = volume;\n\t\n\t      this.source.start(when, offset);\n\t    }\n\t  }, {\n\t    key: 'stop',\n\t    value: function stop() {\n\t      this.isPlaying = false;\n\t      this.gainNode.value = 0;\n\t\n\t      if (this.mode === 'tone') {\n\t        return this.oscillator.stop(this.context.currentTime + this.toneLength);\n\t      }\n\t\n\t      this.source.stop(0);\n\t    }\n\t  }, {\n\t    key: 'toggle',\n\t    value: function toggle() {\n\t      this.isPlaying ? this.stop() : this.play();\n\t    }\n\t  }, {\n\t    key: 'getFrequencyData',\n\t    value: function getFrequencyData() {\n\t      var dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n\t\n\t      this.analyser.getByteFrequencyData(dataArray);\n\t      this.frequencyData = dataArray;\n\t      return dataArray;\n\t    }\n\t  }, {\n\t    key: 'getTimeDomainData',\n\t    value: function getTimeDomainData() {\n\t      var dataArray = new Uint8Array(this.analyser.fftSize);\n\t\n\t      this.analyser.getByteTimeDomainData(dataArray);\n\t      this.timeDomainData = dataArray;\n\t      return dataArray;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render(_ref) {\n\t      var _ref$mode = _ref.mode;\n\t      var mode = _ref$mode === undefined ? 'freq' : _ref$mode;\n\t      var _ref$expand = _ref.expand;\n\t      var expand = _ref$expand === undefined ? true : _ref$expand;\n\t      var _ref$target = _ref.target;\n\t      var target = _ref$target === undefined ? null : _ref$target;\n\t      var _ref$width = _ref.width;\n\t      var width = _ref$width === undefined ? 450 : _ref$width;\n\t      var _ref$height = _ref.height;\n\t      var height = _ref$height === undefined ? 150 : _ref$height;\n\t\n\t      var canvas = target ? target : document.createElement('canvas');\n\t      var ctx = canvas.getContext('2d');\n\t\n\t      canvas.width = width;\n\t      canvas.height = height;\n\t      document.body.appendChild(canvas);\n\t\n\t      if (mode === 'freq') {\n\t        this.analyser.fftSize = 256;\n\t        drawFrequencyData(ctx, width, height, this.analyser, expand);\n\t      }\n\t\n\t      if (mode === 'time') {\n\t        this.analyser.fftSize = 2048;\n\t        drawTimeDomainData(ctx, width, height, this.analyser, expand);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Audio;\n\t}();\n\t\n\t/* harmony default export */ exports[\"a\"] = Audio;\n\t\n\t/**\n\t* private\n\t*/\n\t\n\tfunction drawFrequencyData(ctx, width, height, analyser, expand) {\n\t  var frequencyBinCount = analyser.frequencyBinCount;\n\t  var data = new Uint8Array(frequencyBinCount);\n\t  var barWidth = width / frequencyBinCount * (expand ? 2.5 : 1);\n\t  var barGap = 1;\n\t  var barCount = width / (barWidth + barGap);\n\t  var step = frequencyBinCount / barCount | 0;\n\t\n\t  function loop() {\n\t    requestAnimationFrame(loop);\n\t\n\t    analyser.getByteFrequencyData(data);\n\t\n\t    ctx.globalAlpha = 1;\n\t    ctx.clearRect(0, 0, width, height);\n\t\n\t    ctx.fillStyle = 'rgb(10,10,10)';\n\t\n\t    for (var i = 0; i < barCount; i++) {\n\t      var value = data[i * step] / 256 * height;\n\t\n\t      ctx.globalAlpha = 0.5 + value / height * 0.5;\n\t      ctx.fillRect(i * (barWidth + barGap), height - value, barWidth, value);\n\t    }\n\t  }\n\t\n\t  loop();\n\t}\n\t\n\tfunction drawTimeDomainData(ctx, width, height, analyser, expand) {\n\t  var fftSize = analyser.fftSize;\n\t  var data = new Uint8Array(fftSize);\n\t\n\t  function loop() {\n\t    requestAnimationFrame(loop);\n\t\n\t    analyser.getByteTimeDomainData(data);\n\t\n\t    ctx.globalAlpha = 1;\n\t    ctx.clearRect(0, 0, width, height);\n\t\n\t    ctx.lineWidth = 1;\n\t    ctx.strokeStyle = 'rgb(10,10,10)';\n\t\n\t    ctx.beginPath();\n\t\n\t    var sliceWidth = width / fftSize;\n\t    var x = 0;\n\t\n\t    for (var i = 0; i < fftSize; i++) {\n\t      var v = data[i] / 128;\n\t      var y = v * height / 2;\n\t\n\t      if (i === 0) {\n\t        ctx.moveTo(x, y);\n\t      } else {\n\t        ctx.lineTo(x, y);\n\t      }\n\t\n\t      x += sliceWidth;\n\t    }\n\t\n\t    ctx.lineTo(width, height / 2);\n\t    ctx.stroke();\n\t  }\n\t\n\t  loop();\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/* harmony export */ Object.defineProperty(exports, \"b\", {configurable: false, enumerable: true, get: function() { return NOTES; }});\n\t/* harmony export */ Object.defineProperty(exports, \"a\", {configurable: false, enumerable: true, get: function() { return NOTE_LENGTH; }});\n\t// 谢谢 band.js 的频率表\n\tvar NOTES = {\n\t  'C0': 16.35,\n\t  'C#0': 17.32,\n\t  'Db0': 17.32,\n\t  'D0': 18.35,\n\t  'D#0': 19.45,\n\t  'Eb0': 19.45,\n\t  'E0': 20.60,\n\t  'F0': 21.83,\n\t  'F#0': 23.12,\n\t  'Gb0': 23.12,\n\t  'G0': 24.50,\n\t  'G#0': 25.96,\n\t  'Ab0': 25.96,\n\t  'A0': 27.50,\n\t  'A#0': 29.14,\n\t  'Bb0': 29.14,\n\t  'B0': 30.87,\n\t  'C1': 32.70,\n\t  'C#1': 34.65,\n\t  'Db1': 34.65,\n\t  'D1': 36.71,\n\t  'D#1': 38.89,\n\t  'Eb1': 38.89,\n\t  'E1': 41.20,\n\t  'F1': 43.65,\n\t  'F#1': 46.25,\n\t  'Gb1': 46.25,\n\t  'G1': 49.00,\n\t  'G#1': 51.91,\n\t  'Ab1': 51.91,\n\t  'A1': 55.00,\n\t  'A#1': 58.27,\n\t  'Bb1': 58.27,\n\t  'B1': 61.74,\n\t  'C2': 65.41,\n\t  'C#2': 69.30,\n\t  'Db2': 69.30,\n\t  'D2': 73.42,\n\t  'D#2': 77.78,\n\t  'Eb2': 77.78,\n\t  'E2': 82.41,\n\t  'F2': 87.31,\n\t  'F#2': 92.50,\n\t  'Gb2': 92.50,\n\t  'G2': 98.00,\n\t  'G#2': 103.83,\n\t  'Ab2': 103.83,\n\t  'A2': 110.00,\n\t  'A#2': 116.54,\n\t  'Bb2': 116.54,\n\t  'B2': 123.47,\n\t  'C3': 130.81,\n\t  'C#3': 138.59,\n\t  'Db3': 138.59,\n\t  'D3': 146.83,\n\t  'D#3': 155.56,\n\t  'Eb3': 155.56,\n\t  'E3': 164.81,\n\t  'F3': 174.61,\n\t  'F#3': 185.00,\n\t  'Gb3': 185.00,\n\t  'G3': 196.00,\n\t  'G#3': 207.65,\n\t  'Ab3': 207.65,\n\t  'A3': 220.00,\n\t  'A#3': 233.08,\n\t  'Bb3': 233.08,\n\t  'B3': 246.94,\n\t  'C4': 261.63,\n\t  'C#4': 277.18,\n\t  'Db4': 277.18,\n\t  'D4': 293.66,\n\t  'D#4': 311.13,\n\t  'Eb4': 311.13,\n\t  'E4': 329.63,\n\t  'F4': 349.23,\n\t  'F#4': 369.99,\n\t  'Gb4': 369.99,\n\t  'G4': 392.00,\n\t  'G#4': 415.30,\n\t  'Ab4': 415.30,\n\t  'A4': 440.00,\n\t  'A#4': 466.16,\n\t  'Bb4': 466.16,\n\t  'B4': 493.88,\n\t  'C5': 523.25,\n\t  'C#5': 554.37,\n\t  'Db5': 554.37,\n\t  'D5': 587.33,\n\t  'D#5': 622.25,\n\t  'Eb5': 622.25,\n\t  'E5': 659.26,\n\t  'F5': 698.46,\n\t  'F#5': 739.99,\n\t  'Gb5': 739.99,\n\t  'G5': 783.99,\n\t  'G#5': 830.61,\n\t  'Ab5': 830.61,\n\t  'A5': 880.00,\n\t  'A#5': 932.33,\n\t  'Bb5': 932.33,\n\t  'B5': 987.77,\n\t  'C6': 1046.50,\n\t  'C#6': 1108.73,\n\t  'Db6': 1108.73,\n\t  'D6': 1174.66,\n\t  'D#6': 1244.51,\n\t  'Eb6': 1244.51,\n\t  'E6': 1318.51,\n\t  'F6': 1396.91,\n\t  'F#6': 1479.98,\n\t  'Gb6': 1479.98,\n\t  'G6': 1567.98,\n\t  'G#6': 1661.22,\n\t  'Ab6': 1661.22,\n\t  'A6': 1760.00,\n\t  'A#6': 1864.66,\n\t  'Bb6': 1864.66,\n\t  'B6': 1975.53,\n\t  'C7': 2093.00,\n\t  'C#7': 2217.46,\n\t  'Db7': 2217.46,\n\t  'D7': 2349.32,\n\t  'D#7': 2489.02,\n\t  'Eb7': 2489.02,\n\t  'E7': 2637.02,\n\t  'F7': 2793.83,\n\t  'F#7': 2959.96,\n\t  'Gb7': 2959.96,\n\t  'G7': 3135.96,\n\t  'G#7': 3322.44,\n\t  'Ab7': 3322.44,\n\t  'A7': 3520.00,\n\t  'A#7': 3729.31,\n\t  'Bb7': 3729.31,\n\t  'B7': 3951.07,\n\t  'C8': 4186.01\n\t};\n\t\n\tvar NOTE_LENGTH = {\n\t  'whole': 4,\n\t  'half': 2,\n\t  'quarter': 1,\n\t  'eighth': 0.5,\n\t  'sixteenth': 0.25\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/* harmony export */ Object.defineProperty(exports, \"white\", {configurable: false, enumerable: true, get: function() { return white; }});\n\t/* harmony export */ Object.defineProperty(exports, \"pink\", {configurable: false, enumerable: true, get: function() { return pink; }});\n\t/* harmony export */ Object.defineProperty(exports, \"brown\", {configurable: false, enumerable: true, get: function() { return brown; }});\n\t/* harmony export */ Object.defineProperty(exports, \"perlin\", {configurable: false, enumerable: true, get: function() { return perlin; }});var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar random = function random() {\n\t  return Math.random() * 2 - 1;\n\t};\n\t\n\t// todo 噪音输出需要都在一个固定的范围内，声音不能有的太大有的太小\n\t\n\tvar white = function white(size) {\n\t  var data = new Float32Array(size).map(function () {\n\t    return random();\n\t  });\n\t\n\t  return data;\n\t};\n\t\n\tvar pink = function pink(size) {\n\t  var data = new Float32Array(size);\n\t\n\t  var _fill = new Array(7).fill(0.0);\n\t\n\t  var _fill2 = _slicedToArray(_fill, 7);\n\t\n\t  var a = _fill2[0];\n\t  var b = _fill2[1];\n\t  var c = _fill2[2];\n\t  var d = _fill2[3];\n\t  var e = _fill2[4];\n\t  var f = _fill2[5];\n\t  var g = _fill2[6];\n\t\n\t\n\t  return data.map(function (v, i) {\n\t    var basic = random();\n\t\n\t    if (i) {\n\t      g = basic * 0.115926;\n\t    }\n\t\n\t    a = 0.99886 * a + basic * 0.0555179;\n\t    b = 0.99332 * b + basic * 0.0750759;\n\t    c = 0.96900 * c + basic * 0.1538520;\n\t    d = 0.86650 * d + basic * 0.3104856;\n\t    e = 0.55000 * e + basic * 0.5329522;\n\t    g = -0.7616 * g - basic * 0.0168980;\n\t\n\t    return a + b + c + d + e + f + g + basic * 0.5362;\n\t  });\n\t};\n\t\n\tvar brown = function brown(size) {\n\t  var data = new Float32Array(size);\n\t\n\t  var cache = 0.0;\n\t\n\t  return data.map(function (v, i) {\n\t    var basic = random();\n\t\n\t    return cache = (cache + 0.02 * basic) / 1.02;\n\t  });\n\t};\n\t\n\t// todo 2d perlin noise\n\tvar perlin = function perlin(size) {};\n\n/***/ },\n/* 3 */,\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__audio__ = __webpack_require__(0);\n\t\n\t\n\t\n\tvar audio = new __WEBPACK_IMPORTED_MODULE_0__audio__[\"a\" /* default */]();\n\t\n\tvar button = document.querySelector('button');\n\t\n\taudio.load('../../music/xiaoxingxing.mp3').then(function () {\n\t  button.innerHTML = '点我听歌';\n\t\n\t  button.addEventListener('click', function () {\n\t    return audio.toggle();\n\t  });\n\t});\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** 2.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e9e5c3761f755b49cde8\n **/","\nimport * as noiser from './util/noise'\n\nimport {\n  NOTE_LENGTH,\n  NOTES\n} from './constant'\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext\nconst getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia).bind(navigator)\n\nclass Audio {\n\n  constructor(opts = {}) {\n    const defaultOpts = {\n      fftSize: 256 // 32 ~ 32768\n    }\n\n    this.mode = 'normal' // [normal, voice, tone, noise]\n\n    this.options = {...defaultOpts, ...opts}\n\n    this.context = new AudioContext()\n\n    this.source = this.context.createBufferSource()\n    this.gainNode = this.context.createGain()\n    this.analyser = this.context.createAnalyser()\n    this.oscillator = this.context.createOscillator()\n\n    // 暂时在 render 中根据类型调整 fftSize\n    // todo 同一个audio 实例中，ffisize 不共享，使支持一个实例多个 render\n    // this.analyser.fftSize = this.options.fftSize\n    this.analyser.minDecibels = -90\n    this.analyser.maxDecibels = -10\n    this.analyser.smoothingTimeConstant = 0.85\n\n    this.source.connect(this.analyser)\n    this.analyser.connect(this.gainNode)\n    this.gainNode.connect(this.context.destination)\n  }\n\n  load(url) {\n    return fetch(url)\n      .then(res => res.arrayBuffer())\n      .then(buffer => {\n        return new Promise((resolve, reject) => {\n          this.context.decodeAudioData(buffer, resolve, reject)\n        })\n      })\n      .then(data => {\n        this.buffer = data\n        return data\n      })\n  }\n\n  voice() {\n    this.mode = 'voice'\n    this.gainNode.value = 0\n    this.analyser.disconnect()\n\n    return new Promise(function(resolve, reject) {\n      getUserMedia({audio: true}, resolve, reject)\n    })\n    .then(steam => {\n      // 流式音频，需要修改 source\n      this.source = this.context.createMediaStreamSource(steam)\n      this.source.connect(this.analyser)\n    })\n  }\n\n  noise(type = 'brown') {\n    // type: [white, pink, brown, perlin]\n\n    this.mode = 'noise'\n\n    const sampleRate = this.context.sampleRate\n    const buffSize = 2 * sampleRate\n    const noiseBuff = this.context.createBuffer(1, buffSize, sampleRate)\n    const noiseData = noiseBuff.getChannelData(0) //  Float32Array\n    const data = noiser[type](buffSize)\n\n    noiseData.forEach((v, i) => {\n      noiseData[i] = data[i]\n    })\n\n    this.buffer = noiseBuff\n\n    return Promise.resolve(noiseBuff)\n  }\n\n  tone(opts = {}) {\n    const defaultOpts = {\n      nodeLength: 'quarter',\n      frequency: 2000,\n      type: 'sine',\n      bpm: 120\n    }\n    const options = {...defaultOpts, ...opts}\n\n    this.toneLength = 1 / (options.bpm / 60) * NOTE_LENGTH[options.nodeLength]\n\n    options.frequency = [].concat(options.frequency)\n\n    this.isPlaying = true\n    this.gainNode.value = 0.5\n\n    let startTime, endTime\n\n    options.frequency.forEach((v, i) => {\n      startTime = endTime ? endTime + this.toneLength / 2 : this.context.currentTime + i * this.toneLength\n      endTime = startTime ? startTime + this.toneLength : this.context.currentTime + (i + 1) * this.toneLength\n\n      v.split(',').forEach((item, j) => {\n        if (NOTE_LENGTH[item]) {\n          const blank = 1 / (options.bpm / 60) * NOTE_LENGTH[item]\n          startTime += blank\n          endTime = startTime + blank\n          return\n        }\n\n        const oscillator = this.context.createOscillator()\n\n        oscillator.type = options.type // [sine, square, sawtooth, triangle, custom]\n        oscillator.frequency.value = NOTES[item.trim()] || item\n        oscillator.connect(this.analyser)\n        oscillator.start(startTime)\n        oscillator.stop((endTime))\n\n        this.oscillator = oscillator\n      })\n    })\n\n    this.mode = 'tone'\n  }\n\n  play(opts = {}) {\n    this.isPlaying = true\n    this.gainNode.value = 1\n\n    if (this.mode === 'tone') {\n      return this.oscillator.start(this.context.currentTime)\n    }\n\n    const defaultOpts = {\n      loop: false,\n      duraton: 0,\n      volume: 1,\n      offset: 0,\n      when: 0\n    }\n\n    const options = {...defaultOpts, ...opts}\n\n    const {\n      volume,\n      offset,\n      loop,\n      when\n    } = options\n\n    this.source.buffer = this.buffer\n    this.source.loop = loop\n    this.gainNode.gain.value = volume\n\n    this.source.start(when, offset)\n  }\n\n  stop() {\n    this.isPlaying = false\n    this.gainNode.value = 0\n\n    if (this.mode === 'tone') {\n      return this.oscillator.stop(this.context.currentTime + this.toneLength)\n    }\n\n    this.source.stop(0)\n  }\n\n  toggle() {\n    this.isPlaying ? this.stop() : this.play()\n  }\n\n  getFrequencyData() {\n    const dataArray = new Uint8Array(this.analyser.frequencyBinCount)\n\n    this.analyser.getByteFrequencyData(dataArray)\n    this.frequencyData = dataArray\n    return dataArray\n  }\n\n  getTimeDomainData() {\n    const dataArray = new Uint8Array(this.analyser.fftSize)\n\n    this.analyser.getByteTimeDomainData(dataArray)\n    this.timeDomainData = dataArray\n    return dataArray\n  }\n\n  render({\n    mode = 'freq',\n    expand = true,\n    target = null,\n    width = 450,\n    height = 150\n  }) {\n    const canvas = target ? target : document.createElement('canvas')\n    const ctx = canvas.getContext('2d')\n\n    canvas.width = width\n    canvas.height = height\n    document.body.appendChild(canvas)\n\n    if (mode === 'freq') {\n      this.analyser.fftSize = 256\n      drawFrequencyData(ctx, width, height, this.analyser, expand)\n    }\n\n    if (mode === 'time') {\n      this.analyser.fftSize = 2048\n      drawTimeDomainData(ctx, width, height, this.analyser, expand)\n    }\n  }\n}\n\nexport default Audio\n\n/**\n* private\n*/\n\nfunction drawFrequencyData(ctx, width, height, analyser, expand) {\n  const frequencyBinCount = analyser.frequencyBinCount\n  const data = new Uint8Array(frequencyBinCount)\n  const barWidth = width / frequencyBinCount * (expand ? 2.5 : 1)\n  const barGap = 1\n  const barCount = (width / (barWidth + barGap))\n  const step = (frequencyBinCount / barCount) | 0\n\n  function loop() {\n    requestAnimationFrame(loop)\n\n    analyser.getByteFrequencyData(data)\n\n    ctx.globalAlpha = 1\n    ctx.clearRect(0, 0, width, height)\n\n    ctx.fillStyle = 'rgb(10,10,10)'\n\n    for (let i = 0; i < barCount; i++) {\n      const value = data[i * step] / 256 * height\n\n      ctx.globalAlpha = 0.5 + value / height * 0.5\n      ctx.fillRect(i * (barWidth + barGap), height - value, barWidth, value)\n    }\n  }\n\n  loop()\n}\n\nfunction drawTimeDomainData(ctx, width, height, analyser, expand) {\n  const fftSize = analyser.fftSize\n  const data = new Uint8Array(fftSize)\n\n  function loop() {\n    requestAnimationFrame(loop)\n\n    analyser.getByteTimeDomainData(data)\n\n    ctx.globalAlpha = 1\n    ctx.clearRect(0, 0, width, height)\n\n    ctx.lineWidth = 1\n    ctx.strokeStyle = 'rgb(10,10,10)'\n\n    ctx.beginPath()\n\n    const sliceWidth = width / fftSize\n    let x = 0\n\n    for (let i = 0; i < fftSize; i++) {\n      const v = data[i] / 128\n      const y = v * height / 2\n\n      if (i === 0) {\n        ctx.moveTo(x, y)\n      } else {\n        ctx.lineTo(x, y)\n      }\n\n      x += sliceWidth\n    }\n\n    ctx.lineTo(width, height / 2)\n    ctx.stroke()\n  }\n\n  loop()\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/audio.js\n **/","\n// 谢谢 band.js 的频率表\nexport const NOTES = {\n  'C0': 16.35,\n  'C#0': 17.32,\n  'Db0': 17.32,\n  'D0': 18.35,\n  'D#0': 19.45,\n  'Eb0': 19.45,\n  'E0': 20.60,\n  'F0': 21.83,\n  'F#0': 23.12,\n  'Gb0': 23.12,\n  'G0': 24.50,\n  'G#0': 25.96,\n  'Ab0': 25.96,\n  'A0': 27.50,\n  'A#0': 29.14,\n  'Bb0': 29.14,\n  'B0': 30.87,\n  'C1': 32.70,\n  'C#1': 34.65,\n  'Db1': 34.65,\n  'D1': 36.71,\n  'D#1': 38.89,\n  'Eb1': 38.89,\n  'E1': 41.20,\n  'F1': 43.65,\n  'F#1': 46.25,\n  'Gb1': 46.25,\n  'G1': 49.00,\n  'G#1': 51.91,\n  'Ab1': 51.91,\n  'A1': 55.00,\n  'A#1': 58.27,\n  'Bb1': 58.27,\n  'B1': 61.74,\n  'C2': 65.41,\n  'C#2': 69.30,\n  'Db2': 69.30,\n  'D2': 73.42,\n  'D#2': 77.78,\n  'Eb2': 77.78,\n  'E2': 82.41,\n  'F2': 87.31,\n  'F#2': 92.50,\n  'Gb2': 92.50,\n  'G2': 98.00,\n  'G#2': 103.83,\n  'Ab2': 103.83,\n  'A2': 110.00,\n  'A#2': 116.54,\n  'Bb2': 116.54,\n  'B2': 123.47,\n  'C3': 130.81,\n  'C#3': 138.59,\n  'Db3': 138.59,\n  'D3': 146.83,\n  'D#3': 155.56,\n  'Eb3': 155.56,\n  'E3': 164.81,\n  'F3': 174.61,\n  'F#3': 185.00,\n  'Gb3': 185.00,\n  'G3': 196.00,\n  'G#3': 207.65,\n  'Ab3': 207.65,\n  'A3': 220.00,\n  'A#3': 233.08,\n  'Bb3': 233.08,\n  'B3': 246.94,\n  'C4': 261.63,\n  'C#4': 277.18,\n  'Db4': 277.18,\n  'D4': 293.66,\n  'D#4': 311.13,\n  'Eb4': 311.13,\n  'E4': 329.63,\n  'F4': 349.23,\n  'F#4': 369.99,\n  'Gb4': 369.99,\n  'G4': 392.00,\n  'G#4': 415.30,\n  'Ab4': 415.30,\n  'A4': 440.00,\n  'A#4': 466.16,\n  'Bb4': 466.16,\n  'B4': 493.88,\n  'C5': 523.25,\n  'C#5': 554.37,\n  'Db5': 554.37,\n  'D5': 587.33,\n  'D#5': 622.25,\n  'Eb5': 622.25,\n  'E5': 659.26,\n  'F5': 698.46,\n  'F#5': 739.99,\n  'Gb5': 739.99,\n  'G5': 783.99,\n  'G#5': 830.61,\n  'Ab5': 830.61,\n  'A5': 880.00,\n  'A#5': 932.33,\n  'Bb5': 932.33,\n  'B5': 987.77,\n  'C6': 1046.50,\n  'C#6': 1108.73,\n  'Db6': 1108.73,\n  'D6': 1174.66,\n  'D#6': 1244.51,\n  'Eb6': 1244.51,\n  'E6': 1318.51,\n  'F6': 1396.91,\n  'F#6': 1479.98,\n  'Gb6': 1479.98,\n  'G6': 1567.98,\n  'G#6': 1661.22,\n  'Ab6': 1661.22,\n  'A6': 1760.00,\n  'A#6': 1864.66,\n  'Bb6': 1864.66,\n  'B6': 1975.53,\n  'C7': 2093.00,\n  'C#7': 2217.46,\n  'Db7': 2217.46,\n  'D7': 2349.32,\n  'D#7': 2489.02,\n  'Eb7': 2489.02,\n  'E7': 2637.02,\n  'F7': 2793.83,\n  'F#7': 2959.96,\n  'Gb7': 2959.96,\n  'G7': 3135.96,\n  'G#7': 3322.44,\n  'Ab7': 3322.44,\n  'A7': 3520.00,\n  'A#7': 3729.31,\n  'Bb7': 3729.31,\n  'B7': 3951.07,\n  'C8': 4186.01\n}\n\nexport const NOTE_LENGTH = {\n  'whole': 4,\n  'half': 2,\n  'quarter': 1,\n  'eighth': 0.5,\n  'sixteenth': 0.25\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constant/index.js\n **/","\nconst random = () => Math.random() * 2 - 1\n\n// todo 噪音输出需要都在一个固定的范围内，声音不能有的太大有的太小\n\nexport const white = size => {\n  const data = new Float32Array(size)\n    .map(() => random())\n\n  return data\n}\n\nexport const pink = size => {\n  const data = new Float32Array(size)\n\n  let [a, b, c, d, e, f, g] = new Array(7).fill(0.0)\n\n  return data.map((v, i) => {\n    const basic = random()\n\n    if (i) {\n      g = basic * 0.115926\n    }\n\n    a = 0.99886 * a + basic * 0.0555179\n    b = 0.99332 * b + basic * 0.0750759\n    c = 0.96900 * c + basic * 0.1538520\n    d = 0.86650 * d + basic * 0.3104856\n    e = 0.55000 * e + basic * 0.5329522\n    g = -0.7616 * g - basic * 0.0168980\n\n    return a + b + c + d + e + f + g + basic * 0.5362\n  })\n}\n\nexport const brown = size => {\n  const data = new Float32Array(size)\n\n  let cache = 0.0\n\n  return data.map((v, i) => {\n    const basic = random()\n\n    return cache = (cache + (0.02 * basic)) / 1.02\n  })\n}\n\n// todo 2d perlin noise\nexport const perlin = size => {\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/noise.js\n **/","\nimport Audio from '../audio'\n\nconst audio = new Audio()\n\nconst button = document.querySelector('button')\n\naudio.load('../../music/xiaoxingxing.mp3')\n  .then(() => {\n    button.innerHTML = '点我听歌'\n\n    button.addEventListener('click', () => audio.toggle())\n  })\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/2.js\n **/"],"sourceRoot":""}